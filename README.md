# Guest Service
Этот микросервис предоставляет API для управления гостями. Он поддерживает CRUD операции, такие как создание, чтение, обновление и удаление гостей.
## API
### Создание гостя
- **URL:** `/api.php`
- **Метод:** `POST`
- **Тело запроса:**
```json
{
  "first_name": "John",
  "last_name": "Doe",
  "email": "john.doe@example.com",
  "phone": "+1234567890"
}
```
- **Пример ответа:**
```json
{
    "success": "Данные успешно добавлены с id 1"
}
```
### Получение информации о гостях
- **URL:** `/api.php`
- **Метод:** `GET`
- **Пример ответа:**
```json
[
    {
        "id": "1",
        "first_name": "John",
        "last_name": "Doe",
        "email": " john.doe@example.com ",
        "phone": "+1234567890",
        "country": "USA"
    },
    {
        "id": "2",
        "first_name": "Jane",
        "last_name": "Smith",
        "email": "jane.smith@example.com",
        "phone": "+442012345678",
        "country": "UK"
    }
]
```
### Получение информации о госте
- **URL:** `/api.php?id={id}`
- **Метод:** `GET`
- **Пример ответа:**
```json
{
    "id": "1",
    "first_name": "John",
    "last_name": "Doe",
    "email": "john.doe@example.com",
    "phone": "+1234567890",
    "country": "USA"
}
```
### Обновление информации о госте
Для обновления существующей записи в базе данных можно использовать функциональность частичного обновления. Это позволяет передавать только те параметры, которые необходимо изменить, без необходимости указывать все данные.
- **URL:** `/api.php?id={id}`
- **Метод:** `PUT`
- **Тело запроса:**
```json
{
  "phone": "+12126252532"
}
```
- **Пример ответа:**
```json
{
    "success": "Данные успешно обновлены"
}
```
### Удаление гостя
- **URL:** `/api.php?id={id}`
- **Метод:** `DELETE`
- **Пример ответа:**
```json
{
    "success": "Данные успешно удалены"
}
```
## Валидация
- **first_name:** Обязательное поле, строка;
- **last_name:** Обязательное поле, строка;
- **email:** Обязательное поле, формат email, уникальный;
- **phone:** Обязательное поле, валидный номер телефона (Номер телефона обязательно должен начинаться с символа **+**), уникальный;
- **country:** Необязательное поле, автоматически определяется на основе номера телефона, если не указано.
## Структура базы данных
Микросервис использует MySQL для хранения данных о гостях. Структура таблицы следующая:
```sql
CREATE TABLE guests (
    id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(255) NOT NULL,
    last_name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    phone VARCHAR(20) NOT NULL UNIQUE,
    country VARCHAR(100) 
);
```
## Запуск
Для запуска микросервиса используйте Docker:
```bash
docker-compose up --build
```
## Заголовки для отладки
Все ответы сервера содержат два заголовка:
- **X-Debug-Time:** Время выполнения запроса в миллисекундах.
- **X-Debug-Memory:** Память, использованная для обработки запроса в килобайтах.
